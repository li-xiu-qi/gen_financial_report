## é¡¹ç›®æ¶æ„ä»¥åŠè¯´æ˜

![æ¶æ„å›¾](assets/æ¶æ„å›¾.png)
åœ¨æ•°æ®æ”¶é›†ç¯èŠ‚ï¼Œä»æ•°æ®ç§ç±»ä¸Šä¸»è¦åˆ†ä¸º pdf å’Œ html ä¸¤ç§ç±»å‹ï¼›ä»æ¸ é“æ¥çœ‹ï¼Œé‡‡ç”¨äº†åŒèŠ±é¡ºæ¸ é“ä»¥åŠåŸºäºè”ç½‘æœç´¢çš„å¤šæ¸ é“æœç´¢æ–¹æ¡ˆã€‚

é€‰æ‹©è¿™ä¸¤ç§æ–¹æ¡ˆçš„åŸå› å¦‚ä¸‹ï¼šä¸€æ–¹é¢ï¼ŒåŒèŠ±é¡ºå¹³å°ä¸Šçš„æ•°æ®ååˆ†ä¸°å¯Œï¼Œä¸€æ—¦æˆåŠŸçˆ¬å–ï¼Œåœ¨å…¬å¸ç ”æŠ¥æ–¹é¢ï¼ŒåŸºæœ¬ä¸Šèƒ½å¤Ÿæ»¡è¶³å¤§éƒ¨åˆ†ç”šè‡³å…¨éƒ¨çš„æ•°æ®éœ€æ±‚ï¼Œæ‰€ä»¥å°†å…¶ä½œä¸ºä¼˜è´¨æ•°æ®æºå•ç‹¬åˆ—å‡ºã€‚å¦ä¸€æ–¹é¢ï¼ŒåŸºäºé€†å‘çš„æœç´¢å¼•æ“ï¼Œè®©æˆ‘ä»¬èƒ½å¤Ÿé€šè¿‡å…³é”®è¯æˆ–æŸ¥è¯¢è¯­å¥çš„æ–¹å¼ï¼Œçªç ´å•ä¸€æ•°æ®æºçš„é™åˆ¶ã€‚è¿™ç§æ–¹å¼ä¸ä»…ä¸é™äºç‰¹å®šçš„äº¤æ˜“æ‰€æˆ–å…¬å¼€å…è´¹æ•°æ®è·å–æ¸ é“ï¼Œå€ŸåŠ©å…³é”®è¯æˆ–é«˜çº§æŸ¥è¯¢è¯­å¥ï¼Œè¿˜å¯ä»¥ä¸€æ¬¡æ€§ç©¿é€äº¤æ˜“æ‰€ã€æ”¿åºœå…¬å¼€åº“ã€èµ„è®¯ç«™ç‚¹ç­‰ä¼—å¤šå…è´¹æˆ–åŠå…¬å¼€æ¸ é“ï¼Œä»è€Œåœ¨å…¬å¸ç ”æŠ¥ç¯èŠ‚è¡¥å……åŒèŠ±é¡ºæœªè¦†ç›–çš„ä¿¡æ¯ã€‚è€Œåœ¨è¡Œä¸šç ”æŠ¥å’Œå®è§‚ç ”æŠ¥çš„æ•°æ®è·å–è¿‡ç¨‹ä¸­ï¼Œä¸»è¦ä¾é è”ç½‘æœç´¢è·å–å¯¼èˆª urlï¼Œä¸ºåç»­æ·±å…¥æŒ–æ˜ä¿¡æ¯æ­å»ºæ¡¥æ¢ã€‚

ç„¶è€Œï¼Œæ•°æ®æ”¶é›†è¿‡ç¨‹å›°éš¾é‡é‡ã€‚ç½‘ç»œä¸Šå¤§éƒ¨åˆ†ç½‘é¡µè®¾ç½®äº†åçˆ¬æœºåˆ¶ï¼ŒåŸºäºé€†å‘çš„è”ç½‘æœç´¢å¼•æ“æ¥å£ä¹Ÿæä¸ç¨³å®šï¼Œå®¹æ˜“å‡ºç°é™é€Ÿé—®é¢˜ï¼Œå¯¼è‡´æ— æ³•è®¿é—®ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬å›¢é˜Ÿé‡‡ç”¨æ¨¡æ‹Ÿæµè§ˆå™¨é©±åŠ¨çš„æ–¹å¼ï¼Œå®ç°äº†æœ¬æ¬¡æ¯”èµ›æ‰€éœ€çš„è”ç½‘æœç´¢åŠŸèƒ½ã€‚åŒæ ·ï¼Œè·å–åŒèŠ±é¡ºä¸Šçš„å…¬å¸ä¿¡æ¯åŠæ•°æ®ï¼Œä¹Ÿæ˜¯é€šè¿‡åŸºäºæµè§ˆå™¨é©±åŠ¨è®¿é—®ç½‘é¡µæ¥å®ç°çš„ã€‚

æ‰¾åˆ°æ•°æ®åï¼Œè¿˜éœ€è¿›è¡Œè½¬æ¢å±‚å¤„ç†ï¼Œå› ä¸º html æˆ– pdf æ ¼å¼å¹¶ä¸é€‚åˆç›´æ¥ä¸å¤§æ¨¡å‹äº¤äº’ã€‚html æ ¼å¼å¸¸åŒ…å«å¤§é‡ jsã€css æ ·å¼ä»¥åŠ base64 ç¼–ç ç­‰å†…å®¹ï¼Œå¾ˆå®¹æ˜“ä½¿æ¨¡å‹ä¸Šä¸‹æ–‡è¶…å‡ºæœ€å¤§ tokens é™åˆ¶ã€‚æ‰€ä»¥ï¼Œéœ€è¦å¯¹ html å†…å®¹è¿›è¡Œåˆæ­¥åŠ å·¥ã€‚åœ¨æ­¤è¿‡ç¨‹ä¸­ï¼Œä¸»è¦è¿ç”¨äº† html2md å¤„ç†ï¼Œå°† html è½¬æ¢ä¸º markdownï¼Œä½†è¿™å¹¶éç®€å•çš„æ ¼å¼è½¬æ¢ã€‚å› ä¸ºè½¬æ¢åçš„ markdown ä¾ç„¶å­˜åœ¨æ•°æ®å™ªå£°ï¼Œä¾‹å¦‚å¤§é‡é“¾æ¥è¯­æ³•ï¼Œä¸”å¯èƒ½ä½¿ç”¨ç›¸å¯¹åœ°å€ã€‚ç½‘é¡µé€šå¸¸æ¯é¡µéƒ½å¸¦æœ‰å¯¼èˆªæ ï¼Œå½¢å¼å¤šæ ·ï¼ŒåŒ…æ‹¬å¤´éƒ¨å¯¼èˆªã€å·¦ä¾§è¾¹æ å¯¼èˆªã€åº•éƒ¨å¯¼èˆªç­‰ã€‚å®é™…ä¸Šï¼Œhtml è½¬æ¢æˆçš„ markdown å­˜åœ¨è¯¸å¤šé—®é¢˜ï¼Œæˆ‘ä»¬æ‰€åšçš„åˆæ­¥æ¸…æ´—æ˜¯ç»“åˆå®é™…åœºæ™¯å¼€å±•çš„ã€‚é¦–å…ˆé›†æˆ markdownify åº“ï¼Œå®ç°è‡ªå®šä¹‰çš„ markdown è½¬æ¢ï¼Œåœ¨æ­¤åŸºç¡€ä¸Šï¼Œè¿›ä¸€æ­¥è¿›è¡Œæ¸…æ´—å¤„ç†ï¼Œå»é™¤ markdown ä¸­çš„ base64ã€é“¾æ¥ã€å›¾ç‰‡ä¿¡æ¯ã€‚è€ƒè™‘åˆ°ç½‘ä¸Šæœç´¢è·å–çš„ä¿¡æ¯è´¨é‡å‚å·®ä¸é½ï¼Œåœ¨æœ€åç¯èŠ‚ï¼ŒåŸºäºè§„åˆ™å’Œå¤§æ¨¡å‹æ„å»ºäº†è´¨é‡åˆ¤æ–­é€»è¾‘ï¼Œä½¿ html å†…å®¹åˆæ­¥è¾¾åˆ°å¯ç”¨æ ‡å‡†ã€‚

å¯¹äº pdf æ ¼å¼ï¼Œå¤šæ•°æƒ…å†µä¸‹è§£æéš¾åº¦æå¤§ï¼Œé™¤éæ˜¯æå°‘æ•°çº¯æ–‡æœ¬ç±»å‹ã€‚æå–å…¶ä¸­çš„æ–‡æœ¬ã€è¡¨æ ¼ã€å…¬å¼ç­‰å†…å®¹å›°éš¾é‡é‡ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬å›¢é˜ŸåŸºäºå¼€æºé¡¹ç›® mineru æ­å»ºäº†æä¾› pdf è½¬æ¢åŠŸèƒ½çš„ api æœåŠ¡ã€‚å…¶åº•å±‚é‡‡ç”¨å¤šæ¨¡å‹æå–ç®¡é“ï¼Œæ¶µç›–ç‰ˆé¢æ£€æµ‹ã€å…¬å¼æ£€æµ‹ã€è¡¨æ ¼æ£€æµ‹ã€å›¾ç‰‡æ£€æµ‹ã€OCRã€å…¬å¼è¯†åˆ«ã€è¡¨æ ¼è¯†åˆ«ç­‰ç¯èŠ‚ã€‚è™½ç„¶æå–æ•ˆæœå¹¶éå®Œç¾æ— ç¼ºï¼Œä½†ä¸å•†ç”¨æ–¹æ¡ˆç›¸æ¯”å·®è·ä¸å¤§ï¼Œå¯¹äºæˆ‘ä»¬çš„åº”ç”¨åœºæ™¯è€Œè¨€ï¼Œå·²è¾¾åˆ°å¯ç”¨ä¸”æ•ˆæœè‰¯å¥½çš„ç¨‹åº¦ã€‚é€šè¿‡ mineruï¼Œèƒ½å¤Ÿå°† pdf ç›´æ¥è½¬æ¢æˆ markdown æ ¼å¼çš„æ–‡æœ¬å†…å®¹ã€‚æ­¤å¤–ï¼Œå¯¹äºå…¶ä»–æ ¼å¼å¦‚ docxï¼Œä½¿ç”¨ python - docx è¿›è¡Œè¯»å–å¹¶è½¬æ¢ä¸º markdown å³å¯ã€‚

å½“æœé›†å¥½æ•°æ®å¹¶è½¬æ¢ä¸ºåˆé€‚çš„ markdown æ ¼å¼åï¼Œä¾¿è¿›å…¥ç»„åˆç ”æŠ¥ç”Ÿæˆç¯èŠ‚ã€‚å®é™…ä¸Šï¼Œå¯¹äºæ•´ä¸ªèµ›é¢˜ï¼Œé«˜è´¨é‡æ•°æ®çš„æ”¶é›†è‡³å…³é‡è¦ï¼Œå› ä¸ºæ•°æ®è´¨é‡çš„é«˜ä½ç›´æ¥å†³å®šäº†å†…å®¹çš„è´¨é‡ä¸Šé™ã€‚å—é™äºåªèƒ½ä½¿ç”¨å…¬å¼€å…è´¹çš„ç½‘ç»œæ•°æ®ï¼Œéš¾ä»¥é¿å…æ¨¡å‹å¹»è§‰é—®é¢˜ã€‚æˆ‘ä»¬è™½æ— æ³•æœç»æ¨¡å‹å¹»è§‰ï¼Œä½†å¯ä»¥é‡‡å–æªæ–½é™ä½å…¶å‡ºç°çš„æ¦‚ç‡ã€‚

æˆ‘ä»¬æ”¶é›†åˆ°çš„æ•°æ®åŸºæœ¬ä»¥ {title,url,md,data_source_type} ç»“æ„å­˜å‚¨ï¼Œåˆ†åˆ«å¯¹åº”æ ‡é¢˜ã€é“¾æ¥åœ°å€ã€markdown å†…å®¹ã€æ•°æ®æºç±»å‹ï¼ˆæ•°æ®æºç±»å‹åˆ†ä¸º htmlã€pdf å’Œ docxï¼‰ã€‚æ•°æ®å¤„ç†çš„ç¬¬ä¸€æ­¥æ˜¯åœ¨æ­¤åŸºç¡€ä¸Šæ·»åŠ ä¸€ä¸ª summary å­—æ®µã€‚ç”±äºä»ç½‘é¡µæå–çš„ä¿¡æ¯ï¼Œå…¶ token é‡çº§å¾€å¾€å¯è¾¾å‡ å kï¼Œå‡ ä¹æ²¡æœ‰æ¨¡å‹èƒ½å¤Ÿæ‰¿è½½å¤šä¸ªç½‘é¡µçš„ markdown å†…å®¹ã€‚è™½ç„¶å­˜åœ¨å†…å®¹è¾ƒå°‘çš„ markdown é¡µé¢ï¼Œä½†å æ¯”è¾ƒå°‘ï¼Œå› æ­¤é»˜è®¤æ¯ä¸ª markdown å†…å®¹å¯èƒ½è¶…å‡ºæ¨¡å‹ä¸Šä¸‹æ–‡ç©ºé—´ã€‚æ‰€ä»¥ï¼Œéœ€è¦å¯¹å†…å®¹è¿›è¡Œåˆæ­¥å‹ç¼©æè¿°ï¼Œå³ç”Ÿæˆæ‰€éœ€çš„ summary å­—æ®µã€‚å®é™…å¤„ç†æ—¶ï¼Œç”Ÿæˆä¸¤ç§ç±»å‹çš„ summary å­—æ®µï¼šä¸€ç§æ˜¯å…¨é‡çš„ summaryï¼Œå…¶ tokens ä¸è¶…è¿‡å¤§æ¨¡å‹çš„ä¸Šä¸‹æ–‡ç©ºé—´ï¼›å¦ä¸€ç§æ˜¯å¢é‡å‹ summaryï¼Œé’ˆå¯¹è¶…å‡ºå¤§æ¨¡å‹è®°å¿†ä¸Šé™çš„å†…å®¹ï¼ŒæŒ‰ç…§ token è¿›è¡Œåˆ†å—å¤„ç†ï¼Œä»¥å¤§æ¨¡å‹æœ€å¤§è®°å¿† tokens çš„ 80% ä½œä¸ºä¸€å—ï¼Œé€šè¿‡å¤šæ¬¡å¢é‡å¼ summary æ„å»ºå®Œæ•´çš„å†…å®¹æ‘˜è¦ã€‚æ„å»ºå¥½ summary åï¼Œç›¸å½“äºä¸ºå¤§æ¨¡å‹æ„å»ºäº†ç´¢å¼•ï¼Œåç»­å¾ˆå¤šå·¥ä½œéƒ½å›´ç»• summary å±•å¼€ã€‚

æ­¤æ—¶ï¼Œæœ‰å¿…è¦å°†æˆ‘ä»¬çš„æ–¹æ³•ä¸ RAG å¸¸ç”¨çš„ embedding æ£€ç´¢ç¯èŠ‚è¿›è¡Œå¯¹æ¯”ã€‚RAG åŸºäº embedding å¬å›å†…å®¹ï¼Œè€Œæˆ‘ä»¬ä½¿ç”¨ summary è®©å¤§æ¨¡å‹å¬å›å†…å®¹ã€‚embedding ç´¢å¼•ä»…èƒ½é€šè¿‡ embedding æ¨¡å‹åŸºäº cos ç­‰ç›¸ä¼¼åº¦è¿›è¡Œåˆ¤æ–­ï¼Œå¯¼èˆªæ€§èƒ½å‡ ä¹ä¸ºé›¶ï¼Œåªèƒ½è¿›è¡Œç›¸ä¼¼åº¦è¿‡æ»¤æ“ä½œã€‚è€Œ summary èƒ½å¤Ÿä¸ºå¤§æ¨¡å‹æä¾›åŸºç¡€çš„å†…å®¹æè¿°ï¼Œä½¿å¤§æ¨¡å‹äº†è§£å†…å®¹ç”¨é€”åŠæ‰€å«ä¿¡æ¯ï¼Œå¹¶åŸºäº summary è¿›è¡Œä¸€å®šåˆ¤æ–­ã€‚è™½ç„¶è¿™ç§åˆ¤æ–­ä¸ä¸€å®šå®Œå…¨å‡†ç¡®ï¼Œä½†ç›¸æ¯” embeddingï¼Œå…¶å¯ç”¨æ€§è¦é«˜å¾—å¤šï¼Œä»¥ä¸‹è¯¦ç»†é˜è¿°ã€‚

åœ¨ä½¿ç”¨ summary ä¹‹å‰ï¼Œéœ€æ ¹æ®é¢˜ç›®éœ€æ±‚ç”Ÿæˆå¤§çº²å†…å®¹ã€‚è·å– summary åï¼Œä¸ºæ¯ä¸ªå¤§çº²å†…å®¹åˆ†é… idï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸å·§å¦™çš„æ€è·¯ã€‚è‹¥é‡‡ç”¨ RAG åŸºäº embedding å¬å›å†…å®¹çš„æ€è·¯ï¼Œé¦–æ¬¡å¬å›å¯èƒ½æ— æ³•è·å–æ‰€éœ€å†…å®¹ï¼Œéœ€è¦å¤šæ¬¡åæ€å¹¶ä»¥è¿­ä»£æ–¹å¼å¯»æ‰¾ç›¸å…³å†…å®¹ã€‚ä½†æ ¹æ®å®é™…æµ‹è¯•ï¼Œæ•ˆæœå¹¶ä¸ç†æƒ³ã€‚å› ä¸º embedding çš„ä¸Šä¸‹æ–‡ä¹Ÿæœ‰é™ï¼Œéœ€è¦å¯¹å†…å®¹è¿›è¡ŒäºŒæ¬¡åˆ†å‰²ï¼Œè¿™ä¼šå¯¼è‡´ä¿¡æ¯è¿›ä¸€æ­¥æŸå¤±ã€‚è€Œä¸”åå¤åæ€ä¹Ÿéš¾ä»¥ç§¯ç´¯ä¿¡æ¯ï¼Œæ— æ³•å¾ˆå¥½åœ°å›ç­”é—®é¢˜ï¼Œæœ€ç»ˆè¾“å‡ºå†…å®¹ä»…é€‚ç”¨äºç®€çŸ­é—®é¢˜ï¼Œä¸é€‚åˆç”Ÿæˆå†…å®¹ã€‚å½“ç„¶ï¼Œè‹¥è½¬æ¢æ€è·¯ï¼Œé€šè¿‡å¬å›åˆ¤æ–­å†…å®¹æ˜¯å¦æœ‰ç”¨ï¼Œæœ‰ç”¨åˆ™æ‘˜æŠ„ï¼Œæ— ç”¨åˆ™é‡æ–°æ£€ç´¢ï¼Œç†è®ºä¸Šæˆ–è®¸å¯è¡Œã€‚

å¯¹æ¯”åŸºäº summary ç›´æ¥æŒ‰ç…§å¤§çº²è¿›è¡Œå†…å®¹é…å¯¹çš„æ–¹å¼ï¼ŒåŸºäºå¤§çº²è¿›è¡Œå†…å®¹é…å¯¹ä¼˜åŠ¿æ˜æ˜¾ã€‚ä¾‹å¦‚ï¼Œå…ˆæ’°å†™å¥½å¤§çº²ï¼Œæ˜ç¡®æ¯ä¸ªå¤§çº²æ‰€éœ€å†…å®¹ï¼Œç„¶ååˆ©ç”¨å¤§æ¨¡å‹ç»“åˆ summary åˆ¤æ–­å†…å®¹ä¸å¤§çº²å—æ˜¯å¦ç›¸ç¬¦ï¼Œè‹¥ç›¸ç¬¦åˆ™è®°å½•é…å¯¹ã€‚è¿™ç§æ–¹å¼èƒ½è®©å¤§æ¨¡å‹åœ¨ç”Ÿæˆå†…å®¹æ—¶ï¼Œæ¸…æ¥šå¯ä»å“ªäº›ç¯èŠ‚å¯»æ‰¾å¯¹åº”å†…å®¹ã€‚å¯¹æ¯” embedding ä¸»åŠ¨æ‰¾å†…å®¹å’Œ summary è‡ªåŠ¨é…å¯¹è¢«æ‰¾çš„æ–¹å¼ï¼Œåœ¨ç ”æŠ¥ç”Ÿæˆåœºæ™¯ä¸­ï¼Œè‡ªåŠ¨é…å¯¹çš„æ–¹å¼æ›´å…·ä¼˜åŠ¿ã€‚å› ä¸ºæˆ‘ä»¬æ— éœ€æ¯æ¬¡éå†æ‰€æœ‰å†…å®¹æ¥åˆ¤æ–­èƒ½å¦å›ç­”é—®é¢˜ã€‚ä»ä»»åŠ¡è§’åº¦çœ‹ï¼Œæˆ‘ä»¬çš„æ ¸å¿ƒæ˜¯å›´ç»•å¤§çº²ç”Ÿæˆå†…å®¹ï¼Œä¸åº”æ˜¯ä¸»åŠ¨æ‰¾å†…å®¹ï¼Œè€Œæ˜¯è¢«æ‰¾ã€‚æˆ‘ä»¬æ— éœ€ç»´æŠ¤å†…å®¹ç”¨äºä¸‹ä¸€æ¬¡ä¸»åŠ¨æ£€ç´¢ï¼Œè€Œæ˜¯å…ˆé€šè¿‡å¯å‘å¼æœç´¢æ‰¾åˆ°ä¸€æ‰¹å†…å®¹å¹¶è¿›è¡Œé…å¯¹ã€‚è‹¥å‘ç°å†…å®¹ä¸è¶³ï¼Œå†è¿›è¡Œä¸»åŠ¨æœç´¢å¹¶ç»§ç»­é…å¯¹ã€‚ä»è¿™ä¸ªè§’åº¦çœ‹ï¼Œtoken æ¶ˆè€—æ€»ä½“ä¸Šæœ‰æ‰€å‡å°‘ã€‚å› ä¸º embedding éƒ¨åˆ†éœ€è¦æ£€ç´¢åˆ¤æ–­ç›¸å…³æ€§ï¼Œè¿˜å¯èƒ½éœ€è¦é‡å†™ï¼Œè€Œç›´æ¥æ ¹æ®å¤§çº²é…å¯¹ï¼Œtoken æ¶ˆè€—åˆ™å°‘å¾ˆå¤šã€‚ä»å¹¶è¡Œè§’åº¦çœ‹ï¼Œæˆ‘ä»¬çš„æ–¹æ¡ˆå¯ä»¥è¿›è¡Œå¹¶è¡Œé…å¯¹ï¼Œè€ŒåŸºäº embedding åæ€åç»§ç»­æ£€ç´¢æ˜¯ä¸²è¡Œçš„ï¼Œæ‰€ä»¥åœ¨é€Ÿåº¦ä¸Šï¼Œæˆ‘ä»¬çš„æ–¹æ¡ˆä¹Ÿå…·æœ‰å¾ˆå¤§ä¼˜åŠ¿ã€‚

é…å¯¹å®Œæˆåï¼Œè™½å·²å¯ä»¥è¿›è¡Œé—®é¢˜å›ç­”æˆ–å†…å®¹æ’°å†™ï¼Œä½†ç¼ºå°‘å›¾ï¼Œå› æ­¤éœ€è¦åŠ å…¥æ•°æ®åˆ†æå’Œå›¾è¡¨ç»˜åˆ¶ç¯èŠ‚ã€‚åŸºäº summaryï¼Œå…ˆè®©å¤§æ¨¡å‹åˆ¤æ–­å“ªäº› summary é€‚åˆè¿›è¡Œå¯è§†åŒ–æ“ä½œï¼Œå¹¶ç»‘å®šç›¸åº”å†…å®¹ã€‚è¿™é‡Œçš„ç²¾å¦™ä¹‹å¤„åœ¨äºï¼ŒåŒæ—¶åŠ å…¥å¤šä¸ª summaryï¼Œè®©å¤§æ¨¡å‹åˆ¤æ–­è¿™äº› summary ç»„åˆèƒ½ç”Ÿæˆå“ªäº›å¯è§†åŒ–å†…å®¹ã€‚æ¥ç€ï¼ŒæŒ‰ç…§ id å¯¹å®é™…å†…å®¹è¿›è¡Œå¯è§†åŒ–ã€‚å½“ç„¶ï¼Œè¿˜éœ€åˆ¤æ–­å½“å‰å†…å®¹èƒ½å¦å®Œæˆå¯è§†åŒ–ä»»åŠ¡ï¼Œè‹¥ä¸èƒ½åˆ™è·³è¿‡ã€‚ç»è¿‡å¯¹ id å¯¼èˆªå­—å…¸çš„éå†ï¼Œå®Œæˆå¯¹å·²æœ‰æ•°æ®çš„å¯è§†åŒ–åˆ†æç»“æœç”Ÿæˆã€‚

åœ¨æœ€åçš„ç”Ÿæˆç¯èŠ‚ï¼Œå…ˆè®© AI æŒ‰ç…§åˆ†é…å¥½çš„ id è¿›è¡Œå†…å®¹ç”Ÿæˆï¼Œç„¶åå°†ç”Ÿæˆçš„æ–‡æœ¬ä¸åˆ†æç»˜åˆ¶å‡ºçš„å›¾è¡¨è¿›è¡Œæ··åˆå¤„ç†ï¼Œä½¿æ–‡æœ¬åŒ…å«å›¾ç‰‡ã€‚æœ€åï¼Œå°†ç”Ÿæˆçš„ markdown ç»“åˆ pandoc è¾“å‡ºä¸º word æ–‡ä»¶ã€‚

ä¸‹é¢ä»¥ä¸‹æ˜¯ä»–çš„ä»‹ç»ã€‚

# æ™ºèƒ½ç ”ç©¶æŠ¥å‘Šç”Ÿæˆç³»ç»Ÿ

## ğŸ¯ é¡¹ç›®ç®€ä»‹

æ™ºèƒ½ç ”ç©¶æŠ¥å‘Šç”Ÿæˆç³»ç»Ÿæ˜¯ä¸€ä¸ªåŸºäºå¤§è¯­è¨€æ¨¡å‹çš„è‡ªåŠ¨åŒ–ç ”ç©¶æŠ¥å‘Šç”Ÿæˆå·¥å…·ï¼Œæ”¯æŒ**å…¬å¸ç ”ç©¶æŠ¥å‘Š**ã€**è¡Œä¸šç ”ç©¶æŠ¥å‘Š**å’Œ**å®è§‚ç ”ç©¶æŠ¥å‘Š**ä¸‰ç§ç±»å‹çš„ç ”ç©¶æŠ¥å‘Šè‡ªåŠ¨ç”Ÿæˆã€‚ç³»ç»Ÿé›†æˆäº†æ•°æ®æ”¶é›†ã€æ•°æ®å¤„ç†ã€æŠ¥å‘Šç”Ÿæˆå’Œå›¾è¡¨å¢å¼ºç­‰åŠŸèƒ½ï¼Œæä¾›ä»æ•°æ®åˆ°æŠ¥å‘Šçš„ä¸€ç«™å¼è§£å†³æ–¹æ¡ˆã€‚

## âœ¨ æ ¸å¿ƒç‰¹æ€§

- ğŸ¤– **æ™ºèƒ½æ•°æ®æ”¶é›†**: è‡ªåŠ¨ä»å¤šæºç½‘ç»œæ”¶é›†ç›¸å…³æ•°æ®å’Œèµ„è®¯
- ğŸ“Š **å¤šç±»å‹æŠ¥å‘Š**: æ”¯æŒå…¬å¸ã€è¡Œä¸šã€å®è§‚ä¸‰ç§ç ”ç©¶æŠ¥å‘Šç±»å‹
- ğŸ¨ **å›¾è¡¨è‡ªåŠ¨ç”Ÿæˆ**: åŸºäºæ•°æ®è‡ªåŠ¨ç”Ÿæˆå¯è§†åŒ–å›¾è¡¨
- âš¡ **ç»Ÿä¸€å‘½ä»¤è¡Œæ¥å£**: ä¸€ä¸ªå‘½ä»¤å®Œæˆä»æ•°æ®æ”¶é›†åˆ°æŠ¥å‘Šç”Ÿæˆ
- ğŸ”§ **çµæ´»é…ç½®ç³»ç»Ÿ**: æ”¯æŒå¤šç§APIæœåŠ¡å•†å’Œè‡ªå®šä¹‰é…ç½®
- ğŸ“ˆ **æ‰¹é‡å¤„ç†**: æ”¯æŒæ‰¹é‡ç”Ÿæˆå¤šä¸ªæŠ¥å‘Š
- ğŸŒ **å¤šæ¨¡å‹æ”¯æŒ**: æ”¯æŒç«å±±å¼•æ“ã€ç¡…åŸºæµåŠ¨ã€æ™ºè°±AIç­‰å¤šç§æ¨¡å‹
- ğŸ“„ **DOCX å¯¼å‡º**: æ”¯æŒè‡ªåŠ¨å°† Markdown æŠ¥å‘Šè½¬æ¢ä¸º DOCX æ ¼å¼

## æ•ˆæœç¤ºä¾‹
### å…¬å¸ç ”ç©¶æŠ¥å‘Š
![å…¬å¸ç ”ç©¶æŠ¥å‘Š](assets/ç¬¬å››èŒƒå¼.png)

### è¡Œä¸šç ”ç©¶æŠ¥å‘Š
![è¡Œä¸šç ”ç©¶æŠ¥å‘Š](assets/ä¸­å›½æ™ºèƒ½æœåŠ¡æœºå™¨äººäº§ä¸š.png)

### å®è§‚ç ”ç©¶æŠ¥å‘Š
![å®è§‚ç ”ç©¶æŠ¥å‘Š](assets/å›½å®¶çº§äººå·¥æ™ºèƒ½æ”¿ç­–æ•ˆæœè¯„ä¼°.png)

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

```
gen_report/
â”œâ”€â”€ ğŸ“‹ é…ç½®ä¸å…¥å£
â”‚   â”œâ”€â”€ config.py                    # ç»Ÿä¸€é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ generate_report.py           # ç»Ÿä¸€å‘½ä»¤è¡Œå…¥å£
â”‚   â””â”€â”€ pyproject.toml              # é¡¹ç›®ä¾èµ–é…ç½®
â”‚
â”œâ”€â”€ ğŸ¯ ä¸“ç”¨æŠ¥å‘Šç”Ÿæˆå™¨
â”‚   â”œâ”€â”€ gen_report_company.py        # å…¬å¸æŠ¥å‘Šä¸“ç”¨ç”Ÿæˆå™¨
â”‚   â”œâ”€â”€ gen_report_industry.py       # è¡Œä¸šæŠ¥å‘Šä¸“ç”¨ç”Ÿæˆå™¨
â”‚   â””â”€â”€ gen_report_macro.py          # å®è§‚æŠ¥å‘Šä¸“ç”¨ç”Ÿæˆå™¨
â”‚
â”œâ”€â”€ ğŸ”„ æ•°æ®æ”¶é›†æ¨¡å—
â”‚   â”œâ”€â”€ company_collect_data.py      # å…¬å¸æ•°æ®æ”¶é›†è„šæœ¬
â”‚   â”œâ”€â”€ industry_collection_data.py  # è¡Œä¸šæ•°æ®æ”¶é›†è„šæœ¬
â”‚   â”œâ”€â”€ macro_collection_data.py     # å®è§‚æ•°æ®æ”¶é›†è„šæœ¬
â”‚   â””â”€â”€ data_process/               # æ•°æ®å¤„ç†æ ¸å¿ƒæ¨¡å—
â”‚       â”œâ”€â”€ company_data_collection.py
â”‚       â”œâ”€â”€ industry_data_collection.py
â”‚       â””â”€â”€ macro_data_collection.py
â”‚
â”œâ”€â”€ ğŸ“ æŠ¥å‘Šç”Ÿæˆæ ¸å¿ƒ
â”‚   â”œâ”€â”€ unified_report_generator.py  # ç»Ÿä¸€æŠ¥å‘Šç”Ÿæˆå™¨
â”‚   â”œâ”€â”€ report_prompts.py           # æŠ¥å‘Šæ¨¡æ¿å’Œæç¤ºè¯
â”‚   â””â”€â”€ run_*_research_report.py    # ç‹¬ç«‹è¿è¡Œè„šæœ¬
â”‚
â”œâ”€â”€ ğŸ§ª æµ‹è¯•ä¸ç¤ºä¾‹
â”‚   â”œâ”€â”€ test_integration.py         # é›†æˆæµ‹è¯•
â”‚   â”œâ”€â”€ quick_run_examples.py       # å¿«é€Ÿç¤ºä¾‹è¿è¡Œ
â”‚   â””â”€â”€ tests/                      # æµ‹è¯•æ–‡ä»¶ç›®å½•
â”‚
â”œâ”€â”€ ğŸ” è¾…åŠ©æœåŠ¡
â”‚   â”œâ”€â”€ search_server/              # æœç´¢æœåŠ¡
â”‚   â”œâ”€â”€ md2docx/                    # æ–‡æ¡£è½¬æ¢
â”‚   â””â”€â”€ caches/                     # ç¼“å­˜ç›®å½•
â”‚
â””â”€â”€ ğŸ“Š æ•°æ®ä¸è¾“å‡º
    â”œâ”€â”€ test_*_datas/               # æµ‹è¯•æ•°æ®ç›®å½•
    â”œâ”€â”€ images/                     # ç”Ÿæˆçš„å›¾è¡¨
    â””â”€â”€ *.html                      # æ•°æ®æºæ–‡ä»¶
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå‡†å¤‡

**æœ¬äººç³»ç»Ÿé…ç½®ï¼ˆä»…ä¾›å‚è€ƒï¼‰:**

- ğŸ’» Windows ç³»ç»Ÿ
- ğŸš€ 64GB å†…å­˜
- ğŸ’¾ 2TB ç¡¬ç›˜
- ğŸ® 16GB æ˜¾å­˜æ˜¾å¡ï¼ˆå¦‚ç¬”è®°æœ¬ RTX 3080ï¼‰

**å¿…éœ€è½¯ä»¶:**

- Python 3.11+
- [uv](https://docs.astral.sh/uv/) åŒ…ç®¡ç†å™¨ æˆ– [Conda](https://docs.conda.io/)
- [Pandoc](https://pandoc.org/) (ç”¨äº Markdown è½¬ DOCX)

#### ğŸ æ–¹å¼ä¸€ï¼šä½¿ç”¨ Conda ç¯å¢ƒï¼ˆæ¨èï¼‰

**1. å®‰è£… Conda**

å¦‚æœè¿˜æ²¡æœ‰å®‰è£… Condaï¼Œè¯·ä»ä»¥ä¸‹é“¾æ¥ä¸‹è½½å®‰è£…ï¼š

- [Anaconda](https://www.anaconda.com/products/distribution) (å®Œæ•´ç‰ˆ)
- [Miniconda](https://docs.conda.io/en/latest/miniconda.html) (è½»é‡ç‰ˆ)

**2. åˆ›å»ºå¹¶æ¿€æ´»ç¯å¢ƒ**

```bash
# åˆ›å»º Python 3.11 ç¯å¢ƒ
conda create -n gen-report python=3.11

# æ¿€æ´»ç¯å¢ƒ
conda activate gen-report

# å®‰è£… pandocï¼ˆé‡è¦ï¼šç”¨äº DOCX è½¬æ¢ï¼‰
conda install pandoc

# éªŒè¯ pandoc å®‰è£…
pandoc --version
```

**3. å®‰è£…é¡¹ç›®ä¾èµ–**

```bash
# è¿›å…¥é¡¹ç›®ç›®å½•
cd gen_report

# ä½¿ç”¨ pip å®‰è£…ä¾èµ–
pip install -r requirements.txt

# æˆ–è€…ä½¿ç”¨ conda å®‰è£…ï¼ˆå¦‚æœæœ‰ conda-forge ç‰ˆæœ¬ï¼‰
# conda install --file requirements.txt -c conda-forge
```

#### âš¡ æ–¹å¼äºŒï¼šä½¿ç”¨ uv ç¯å¢ƒ

**1. å®‰è£… uv**

```bash
# Windows (PowerShell)
powershell -c "irm https://astral.sh/uv/install.ps1 | iex"

# æˆ–è€…ä½¿ç”¨ pip å®‰è£…
pip install uv
```

**2. åˆ›å»ºé¡¹ç›®ç¯å¢ƒ**

```bash
# è¿›å…¥é¡¹ç›®ç›®å½•
cd gen_report

# åŒæ­¥ä¾èµ–ï¼ˆè‡ªåŠ¨åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼‰
uv sync

# éªŒè¯ç¯å¢ƒ
uv run python --version
```

**3. å®‰è£… pandoc**

âš ï¸ **é‡è¦æç¤ºï¼š** uv ç¯å¢ƒä¸‹éœ€è¦å•ç‹¬å®‰è£… pandoc

```bash
# æ–¹å¼1ï¼šä½¿ç”¨ conda å®‰è£… pandocï¼ˆæ¨èï¼‰
conda install pandoc

# æ–¹å¼2ï¼šWindows ä¸‹è½½å®‰è£…åŒ…
# ä» https://pandoc.org/installing.html ä¸‹è½½ Windows å®‰è£…åŒ…

# æ–¹å¼3ï¼šä½¿ç”¨ chocolateyï¼ˆå¦‚æœå·²å®‰è£…ï¼‰
choco install pandoc

# éªŒè¯ pandoc å®‰è£…
pandoc --version
```

#### ğŸ” ç¯å¢ƒéªŒè¯

æ— è®ºä½¿ç”¨å“ªç§æ–¹å¼ï¼Œè¯·éªŒè¯ç¯å¢ƒé…ç½®ï¼š

```bash
# æ£€æŸ¥ Python ç‰ˆæœ¬
python --version  # åº”è¯¥æ˜¾ç¤º Python 3.11+

# æ£€æŸ¥ pandocï¼ˆç”¨äº DOCX è½¬æ¢ï¼‰
pandoc --version

# æ£€æŸ¥é¡¹ç›®é…ç½®
python config.py

# æµ‹è¯•å¯¼å…¥å…³é”®ä¾èµ–
python -c "import openai, aiohttp, beautifulsoup4, playwright; print('âœ… æ ¸å¿ƒä¾èµ–å¯¼å…¥æˆåŠŸ')"
```

#### ğŸ“¦ ä¾èµ–åŒ…è¯´æ˜

é¡¹ç›®ä¸»è¦ä¾èµ–åŒ…ï¼š

```
# æ ¸å¿ƒ AI å’Œ API
openai>=1.95.1              # OpenAI API å®¢æˆ·ç«¯
zhipuai>=2.1.5.20250724     # æ™ºè°± AI API

# ç½‘ç»œè¯·æ±‚å’Œçˆ¬è™«
aiohttp>=3.12.14             # å¼‚æ­¥ HTTP å®¢æˆ·ç«¯
beautifulsoup4>=4.13.4      # HTML è§£æ
playwright>=1.53.0          # æµè§ˆå™¨è‡ªåŠ¨åŒ–
selenium>=4.34.2            # Web è‡ªåŠ¨åŒ–
trafilatura>=2.0.0          # ç½‘é¡µå†…å®¹æå–

# æ–‡æ¡£å¤„ç†
python-docx>=1.2.0          # Word æ–‡æ¡£å¤„ç†
pypandoc>=1.15              # Pandoc Python æ¥å£
markdownify>=1.1.0          # HTML è½¬ Markdown

# æ•°æ®å¤„ç†å’Œå¯è§†åŒ–
numpy>=2.3.1                # æ•°å€¼è®¡ç®—
pyecharts>=2.0.8            # å›¾è¡¨ç”Ÿæˆ
jieba>=0.42.1               # ä¸­æ–‡åˆ†è¯

# å…¶ä»–å·¥å…·
python-dotenv>=1.1.1        # ç¯å¢ƒå˜é‡ç®¡ç†
cachetools>=6.1.0           # ç¼“å­˜å·¥å…·
tiktoken>=0.9.0             # Token è®¡ç®—
```

#### ğŸš¨ å¸¸è§é—®é¢˜è§£å†³

**é—®é¢˜1ï¼špandoc æ— æ³•æ‰¾åˆ°**

```bash
# è§£å†³æ–¹æ¡ˆï¼šç¡®ä¿ pandoc åœ¨ç³»ç»Ÿ PATH ä¸­
where pandoc  # Windows
which pandoc  # Linux/Mac

# å¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œé‡æ–°å®‰è£… pandoc
conda install pandoc
```

**é—®é¢˜2ï¼šuv run æŠ¥é”™**

```bash
# è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨ conda ç¯å¢ƒè¿è¡Œ
conda activate gen-report
python generate_report.py --help
```

**é—®é¢˜3ï¼šä¾èµ–å†²çª**

```bash
# è§£å†³æ–¹æ¡ˆï¼šæ¸…ç†ç¯å¢ƒé‡æ–°å®‰è£…
# Conda ç¯å¢ƒ
conda remove -n gen-report --all
conda create -n gen-report python=3.11

# uv ç¯å¢ƒ
uv clean
uv sync
```

### 2. å®‰è£…ä¾èµ–

```bash

cd gen_report

# å®‰è£…ä¾èµ–
uv sync
```

### 3. é…ç½®ç¯å¢ƒ

åˆ›å»º `.env` æ–‡ä»¶å¹¶é…ç½®APIå¯†é’¥ï¼š

```bash
# å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿
cp .env.example .env

# ç¼–è¾‘é…ç½®æ–‡ä»¶
vim .env
```

å¿…éœ€çš„é…ç½®é¡¹ï¼š

```env
# APIæœåŠ¡å•†é…ç½®
OPENAI_API_KEY=your_volcano_api_key
OPENAI_BASE_URL=https://ark.cn-beijing.volces.com/api/v3
OPENAI_MODEL=deepseek-v3-250324

GUIJI_API_KEY=your_guiji_api_key
GUIJI_BASE_URL=https://api.siliconflow.cn/v1

ZHIPU_API_KEY=your_zhipu_api_key

# å¯é€‰æœåŠ¡é…ç½®
PDF_BASE_URL=http://localhost:10001
SEARCH_URL=http://localhost:8000

# æœç´¢é…ç½®ï¼ˆé»˜è®¤ä½¿ç”¨æœ¬åœ°æœç´¢æœåŠ¡ï¼‰
USE_ZHIPU_SEARCH=false
```

### 4. é…ç½®è¾…åŠ©æœåŠ¡

#### PDF è§£ææœåŠ¡ï¼ˆå¯é€‰ä½†æ¨èï¼‰

æœ¬ç³»ç»Ÿçš„ PDF è§£æåŠŸèƒ½åŸºäºmineruå®ç°ï¼Œå¹¶å°è½¬æˆäº†å¾®æœåŠ¡ [remote_pdf_parse_serve](https://github.com/li-xiu-qi/remote_pdf_parse_serve) å®ç°ï¼Œæˆ‘ä»¬å°†å…¶éƒ¨ç½²åœ¨äº† A6000 æœåŠ¡å™¨ä¸Šæä¾›è¿œç¨‹ PDF è§£ææœåŠ¡ã€‚

å¦‚éœ€å¯ç”¨ PDF è§£æåŠŸèƒ½ï¼š

1. ä¸‹è½½å¹¶éƒ¨ç½² PDF è§£ææœåŠ¡ï¼š

   ```bash
   git clone https://github.com/li-xiu-qi/remote_pdf_parse_serve
   cd remote_pdf_parse_serve
   # æŒ‰ç…§é¡¹ç›®è¯´æ˜è¿›è¡Œéƒ¨ç½²
   ```

2. åœ¨ `.env` æ–‡ä»¶ä¸­é…ç½®æœåŠ¡åœ°å€ï¼š

   ```env
   PDF_BASE_URL=http://your_server:10001
   ```

#### æœç´¢æœåŠ¡ï¼ˆæ¨èï¼‰

ç³»ç»Ÿæ”¯æŒä¸¤ç§æœç´¢æ–¹å¼ï¼š

**æ–¹å¼1ï¼šæœ¬åœ°æœç´¢æœåŠ¡ï¼ˆæ¨èï¼‰**

é¡¹ç›®åŒ…å«æœ¬åœ°æœç´¢æœåŠ¡ï¼ŒåŸºäº Playwright å®ç°ï¼Œé»˜è®¤å¯ç”¨ï¼š

1. å¯åŠ¨æœç´¢æœåŠ¡ï¼š

   ```bash
   cd search_server
   python search.py
   ```

2. åœ¨ `.env` æ–‡ä»¶ä¸­é…ç½®ï¼š

   ```env
   SEARCH_URL=http://localhost:8000
   USE_ZHIPU_SEARCH=false  # é»˜è®¤å€¼ï¼Œä½¿ç”¨æœ¬åœ°æœç´¢
   ```

**æ–¹å¼2ï¼šæ™ºè°±æœç´¢æœåŠ¡**

å¦‚æœéœ€è¦ä½¿ç”¨æ™ºè°±æœç´¢æœåŠ¡ï¼Œå¯ä»¥åœ¨ `.env` æ–‡ä»¶ä¸­é…ç½®ï¼š

```env
USE_ZHIPU_SEARCH=true
ZHIPU_API_KEY=your_zhipu_api_key
```

**æ³¨æ„ï¼š** ç³»ç»Ÿé»˜è®¤ä½¿ç”¨æœ¬åœ°æœç´¢æœåŠ¡ï¼Œè¿™æ ·å¯ä»¥é¿å…é¢å¤–çš„APIè°ƒç”¨è´¹ç”¨ã€‚

### 5. éªŒè¯é…ç½®

```bash
# æ£€æŸ¥é…ç½®çŠ¶æ€
uv run python config.py
```

### 6. ç”ŸæˆæŠ¥å‘Š

#### ğŸ¢ å…¬å¸ç ”ç©¶æŠ¥å‘Š

```bash
# åŸºç¡€ç”¨æ³• - ä»…ç”Ÿæˆ Markdownï¼ˆè‡ªåŠ¨æŸ¥æ‰¾ test_company_datas ç›®å½•ï¼‰
uv run generate_report.py company --company_name "4Paradigm"

# å¸¦å…¬å¸ä»£ç 
uv run generate_report.py company --company_name "å•†æ±¤ç§‘æŠ€" --company_code "00020.HK"

# æŒ‡å®šæ•°æ®ç›®å½•ï¼ˆæ¨èï¼Œé¿å…é‡å¤æ•°æ®æ”¶é›†ï¼‰
uv run generate_report.py company --company_name "4Paradigm" --data_dir "test_company_datas"

# è‡ªå®šä¹‰è¾“å‡ºè·¯å¾„
uv run generate_report.py company --company_name "4Paradigm" --output "reports/4paradigm_report.md"

# ä½¿ç”¨ä¾¿æ·è„šæœ¬ï¼ˆæ”¯æŒ DOCX è½¬æ¢ï¼‰ - DOCX æ–‡ä»¶è¾“å‡ºåˆ° reports ç›®å½•
python run_company_research_report.py --company_name "4Paradigm" --to_docx

# æŒ‡å®šæ•°æ®ç›®å½•å¹¶è½¬æ¢ä¸º DOCX
python run_company_research_report.py --company_name "4Paradigm" --data_dir "test_company_datas" --to_docx

# è‡ªå®šä¹‰ DOCX è¾“å‡ºè·¯å¾„
python run_company_research_report.py --company_name "4Paradigm" --to_docx --docx_output "reports/4paradigm_report.docx"
```

#### ğŸ­ è¡Œä¸šç ”ç©¶æŠ¥å‘Š

```bash
# åŸºç¡€ç”¨æ³• - ä»…ç”Ÿæˆ Markdown
uv run generate_report.py industry --industry_name "ä¸­å›½æ™ºèƒ½æœåŠ¡æœºå™¨äººäº§ä¸š"

# ç‰¹å®šè¡Œä¸š
uv run generate_report.py industry --industry_name "æ™ºèƒ½é£æ§&å¤§æ•°æ®å¾ä¿¡æœåŠ¡"

# æŒ‡å®šæ•°æ®ç›®å½•ï¼ˆæ¨èï¼Œé¿å…é‡å¤æ•°æ®æ”¶é›†ï¼‰
uv run generate_report.py industry --industry_name "ä¸­å›½æ™ºèƒ½æœåŠ¡æœºå™¨äººäº§ä¸š" --data_dir "test_industry_datas"

# ä½¿ç”¨ä¾¿æ·è„šæœ¬ï¼ˆæ”¯æŒ DOCX è½¬æ¢ï¼‰ - DOCX æ–‡ä»¶è¾“å‡ºåˆ° reports ç›®å½•
python run_industry_research_report.py --industry_name "ä¸­å›½æ™ºèƒ½æœåŠ¡æœºå™¨äººäº§ä¸š" --to_docx

# æŒ‡å®šæ•°æ®ç›®å½•å¹¶è½¬æ¢ä¸º DOCX
python run_industry_research_report.py --industry_name "ä¸­å›½æ™ºèƒ½æœåŠ¡æœºå™¨äººäº§ä¸š" --data_dir "test_industry_datas" --to_docx
```

#### ğŸŒ å®è§‚ç ”ç©¶æŠ¥å‘Š

```bash
# åŸºç¡€ç”¨æ³• - ä»…ç”Ÿæˆ Markdown
uv run generate_report.py macro --macro_name "äººå·¥æ™ºèƒ½+æ”¿ç­–æ•ˆæœè¯„ä¼°"

# æŒ‡å®šæ—¶é—´èŒƒå›´
uv run generate_report.py macro --macro_name "ç”Ÿæˆå¼AIåŸºå»ºä¸ç®—åŠ›æŠ•èµ„è¶‹åŠ¿" --time "2023-2026"

# æŒ‡å®šæ•°æ®ç›®å½•ï¼ˆæ¨èï¼Œé¿å…é‡å¤æ•°æ®æ”¶é›†ï¼‰
uv run generate_report.py macro --macro_name "å›½å®¶çº§äººå·¥æ™ºèƒ½+æ”¿ç­–æ•ˆæœè¯„ä¼°" --time "2023-2025" --data_dir "test_macro_datas"

# ä½¿ç”¨ä¾¿æ·è„šæœ¬ï¼ˆæ”¯æŒ DOCX è½¬æ¢ï¼‰ - DOCX æ–‡ä»¶è¾“å‡ºåˆ° reports ç›®å½•
python run_macro_research_report.py --macro_name "å›½å®¶çº§äººå·¥æ™ºèƒ½+æ”¿ç­–æ•ˆæœè¯„ä¼°" --time "2023-2025" --to_docx

# æŒ‡å®šæ•°æ®ç›®å½•å¹¶è½¬æ¢ä¸º DOCX
python run_macro_research_report.py --macro_name "å›½å®¶çº§äººå·¥æ™ºèƒ½+æ”¿ç­–æ•ˆæœè¯„ä¼°" --time "2023-2025" --data_dir "test_macro_datas" --to_docx
```

## ğŸ“ ç›®å½•ç»“æ„ç®¡ç†

### è¾“å‡ºç›®å½•ç»“æ„

ç³»ç»Ÿä¼šè‡ªåŠ¨ç®¡ç†ä»¥ä¸‹ç›®å½•ç»“æ„ï¼š

```bash
gen_report/
â”œâ”€â”€ ğŸ“Š æ•°æ®ç›®å½•
â”‚   â”œâ”€â”€ test_company_datas/          # å…¬å¸æ•°æ®
â”‚   â”œâ”€â”€ test_industry_datas/         # è¡Œä¸šæ•°æ®
â”‚   â””â”€â”€ test_macro_datas/            # å®è§‚æ•°æ®
â”‚
â”œâ”€â”€ ğŸ“„ æŠ¥å‘Šè¾“å‡ºç›®å½•
â”‚   â””â”€â”€ reports/                     # DOCX æŠ¥å‘Šç»Ÿä¸€è¾“å‡ºç›®å½•
â”‚       â”œâ”€â”€ Company_Research_Report.docx
â”‚       â”œâ”€â”€ Industry_Research_Report.docx
â”‚       â”œâ”€â”€ Macro_Research_Report.docx
â”‚       â””â”€â”€ custom_reports/          # è‡ªå®šä¹‰æŠ¥å‘Šå­ç›®å½•
â”‚
â””â”€â”€ ğŸ”§ å…¶ä»–æ–‡ä»¶...
```

**è¾“å‡ºç›®å½•ç‰¹æ€§ï¼š**

- ğŸ—‚ï¸ **è‡ªåŠ¨åˆ›å»º**ï¼šç³»ç»Ÿä¼šè‡ªåŠ¨åˆ›å»º `reports` ç›®å½•
- ğŸ“‹ **ç»Ÿä¸€ç®¡ç†**ï¼šæ‰€æœ‰ DOCX æŠ¥å‘Šé»˜è®¤è¾“å‡ºåˆ° `reports` ç›®å½•
- ğŸ¯ **çµæ´»é…ç½®**ï¼šæ”¯æŒé€šè¿‡ `--docx_output` å‚æ•°è‡ªå®šä¹‰è¾“å‡ºè·¯å¾„
- ğŸ”„ **ç‰ˆæœ¬ç®¡ç†**ï¼šé¿å…æ–‡ä»¶æ•£è½åœ¨é¡¹ç›®æ ¹ç›®å½•

## ğŸ“ æ•°æ®ç›®å½•ç®¡ç†

### è‡ªåŠ¨æ•°æ®ç›®å½•æŸ¥æ‰¾

ç³»ç»Ÿä¼šæŒ‰ä»¥ä¸‹ä¼˜å…ˆçº§è‡ªåŠ¨æŸ¥æ‰¾æ•°æ®ç›®å½•ï¼š

1. **ç”¨æˆ·æŒ‡å®šç›®å½•**ï¼šé€šè¿‡ `--data_dir` å‚æ•°æŒ‡å®šçš„ç›®å½•
2. **é€šç”¨æ•°æ®ç›®å½•**ï¼šè‡ªåŠ¨æ£€æŸ¥é€šç”¨ç›®å½•ï¼ˆå¦‚ `test_company_datas`ã€`test_industry_datas`ã€`test_macro_datas`ï¼‰
3. **ç‰¹å®šå‘½åç›®å½•**ï¼šæ ¹æ®ä¸»é¢˜åç§°ç”Ÿæˆçš„ç‰¹å®šç›®å½•ï¼ˆå¦‚ `test_company_datas_4Paradigm`ï¼‰

### ä½¿ç”¨å·²æœ‰æ•°æ®ç›®å½•ï¼ˆæ¨èï¼‰

å¦‚æœä½ å·²ç»æœ‰äº†æ•°æ®ç›®å½•ï¼Œå¯ä»¥é€šè¿‡ `--data_dir` å‚æ•°æŒ‡å®šï¼Œé¿å…é‡å¤æ”¶é›†æ•°æ®ï¼š

```bash
# å…¬å¸ç ”ç©¶æŠ¥å‘Š - æŒ‡å®šå·²æœ‰æ•°æ®ç›®å½•
python run_company_research_report.py --company_name "4Paradigm" --data_dir "test_company_datas" --to_docx

# è¡Œä¸šç ”ç©¶æŠ¥å‘Š - æŒ‡å®šå·²æœ‰æ•°æ®ç›®å½•  
python run_industry_research_report.py --industry_name "ä¸­å›½æ™ºèƒ½æœåŠ¡æœºå™¨äººäº§ä¸š" --data_dir "test_industry_datas" --to_docx

# å®è§‚ç ”ç©¶æŠ¥å‘Š - æŒ‡å®šå·²æœ‰æ•°æ®ç›®å½•
python run_macro_research_report.py --macro_name "å›½å®¶çº§äººå·¥æ™ºèƒ½+æ”¿ç­–æ•ˆæœè¯„ä¼°" --time "2023-2025" --data_dir "test_macro_datas" --to_docx

# ä½¿ç”¨è‡ªå®šä¹‰æ•°æ®ç›®å½•
python run_company_research_report.py --company_name "æŸå…¬å¸" --data_dir "my_custom_data" --to_docx
```

### å¿«é€Ÿä½¿ç”¨ç°æœ‰æ•°æ®ç”ŸæˆæŠ¥å‘Š

å¦‚æœä½ å·²ç»æœ‰äº†å®Œæ•´çš„æ•°æ®ç›®å½•ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å¿«é€Ÿç”ŸæˆæŠ¥å‘Šï¼š

```bash
# åŸºäºç°æœ‰å…¬å¸æ•°æ®ç”ŸæˆæŠ¥å‘Š
python run_company_research_report.py --company_name "4Paradigm" --data_dir "test_company_datas" --to_docx

# åŸºäºç°æœ‰è¡Œä¸šæ•°æ®ç”ŸæˆæŠ¥å‘Š
python run_industry_research_report.py --industry_name "ä¸­å›½æ™ºèƒ½æœåŠ¡æœºå™¨äººäº§ä¸š" --data_dir "test_industry_datas" --to_docx

# åŸºäºç°æœ‰å®è§‚æ•°æ®ç”ŸæˆæŠ¥å‘Š
python run_macro_research_report.py --macro_name "å›½å®¶çº§äººå·¥æ™ºèƒ½+æ”¿ç­–æ•ˆæœè¯„ä¼°" --time "2023-2025" --data_dir "test_macro_datas" --to_docx
```

**è¿™äº›å‘½ä»¤çš„ä¼˜åŠ¿ï¼š**

- âš¡ **æé€Ÿç”Ÿæˆ**ï¼šè·³è¿‡æ•°æ®æ”¶é›†é˜¶æ®µï¼Œç›´æ¥ç”ŸæˆæŠ¥å‘Š
- ğŸ’° **é›¶æˆæœ¬**ï¼šä¸æ¶ˆè€—APIè°ƒç”¨ï¼Œå®Œå…¨åŸºäºæœ¬åœ°æ•°æ®
- ğŸ¨ **æœ€æ–°ä¼˜åŒ–**ï¼šä½¿ç”¨æœ€æ–°çš„å›¾è¡¨å¢å¼ºç®—æ³•å’Œæç¤ºè¯
- ğŸ“ **æ•´æ´è¾“å‡º**ï¼šæŠ¥å‘Šè‡ªåŠ¨ä¿å­˜åˆ° `reports` ç›®å½•

### æ•°æ®ç›®å½•ç»“æ„

æ¯ä¸ªæ•°æ®ç›®å½•åŒ…å«ä»¥ä¸‹æ–‡ä»¶ç»“æ„ï¼š

```bash
# å…¬å¸æ•°æ®ç›®å½•ç»“æ„
test_company_datas/
â”œâ”€â”€ company_outline.json              # å…¬å¸æŠ¥å‘Šå¤§çº²
â”œâ”€â”€ flattened_company_data.json      # æ‰å¹³åŒ–å…¬å¸æ•°æ®
â”œâ”€â”€ outline_data_allocation.json      # æ•°æ®åˆ†é…æ˜ å°„
â”œâ”€â”€ visualization_assets.json         # å¯è§†åŒ–èµ„äº§é…ç½®
â”œâ”€â”€ visualization_data_results.json   # å¯è§†åŒ–æ•°æ®ç»“æœ
â””â”€â”€ images/                           # ç”Ÿæˆçš„å›¾è¡¨æ–‡ä»¶ç›®å½•

# è¡Œä¸šæ•°æ®ç›®å½•ç»“æ„
test_industry_datas/
â”œâ”€â”€ industry_outline.json            # è¡Œä¸šæŠ¥å‘Šå¤§çº²
â”œâ”€â”€ flattened_industry_data.json     # æ‰å¹³åŒ–è¡Œä¸šæ•°æ®
â”œâ”€â”€ outline_data_allocation.json      # æ•°æ®åˆ†é…æ˜ å°„
â”œâ”€â”€ visualization_assets.json         # å¯è§†åŒ–èµ„äº§é…ç½®
â”œâ”€â”€ visualization_data_results.json   # å¯è§†åŒ–æ•°æ®ç»“æœ
â””â”€â”€ images/                           # ç”Ÿæˆçš„å›¾è¡¨æ–‡ä»¶ç›®å½•

# å®è§‚æ•°æ®ç›®å½•ç»“æ„
test_macro_datas/
â”œâ”€â”€ macro_outline.json               # å®è§‚æŠ¥å‘Šå¤§çº²
â”œâ”€â”€ flattened_macro_data.json        # æ‰å¹³åŒ–å®è§‚æ•°æ®
â”œâ”€â”€ outline_data_allocation.json      # æ•°æ®åˆ†é…æ˜ å°„
â”œâ”€â”€ visualization_assets.json         # å¯è§†åŒ–èµ„äº§é…ç½®
â”œâ”€â”€ visualization_data_results.json   # å¯è§†åŒ–æ•°æ®ç»“æœ
â””â”€â”€ images/                           # ç”Ÿæˆçš„å›¾è¡¨æ–‡ä»¶ç›®å½•
    â”œâ”€â”€ chart_001.png                # è‡ªåŠ¨ç”Ÿæˆçš„å›¾è¡¨
    â”œâ”€â”€ chart_002.png
    â””â”€â”€ ...
```

**æ–‡ä»¶è¯´æ˜ï¼š**

- **æ ¸å¿ƒæ•°æ®æ–‡ä»¶ï¼ˆå¿…éœ€ï¼‰ï¼š**
  - `*_outline.json`: æŠ¥å‘Šå¤§çº²ç»“æ„
  - `flattened_*_data.json`: æ‰å¹³åŒ–çš„åŸå§‹æ•°æ®
  - `outline_data_allocation.json`: æ•°æ®åˆ°å¤§çº²çš„åˆ†é…æ˜ å°„

- **å¯è§†åŒ–æ–‡ä»¶ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰ï¼š**
  - `visualization_assets.json`: å¯è§†åŒ–èµ„äº§é…ç½®ä¿¡æ¯
  - `visualization_data_results.json`: å¯è§†åŒ–å¤„ç†ç»“æœ
  - `images/`: åŒ…å«æ‰€æœ‰è‡ªåŠ¨ç”Ÿæˆçš„PNGå›¾è¡¨æ–‡ä»¶

### æ•°æ®ç›®å½•ä¼˜åŠ¿

ä½¿ç”¨å·²æœ‰æ•°æ®ç›®å½•çš„ä¼˜åŠ¿ï¼š

- âš¡ **èŠ‚çœæ—¶é—´**ï¼šé¿å…é‡å¤çš„æ•°æ®æ”¶é›†è¿‡ç¨‹
- ğŸ’° **èŠ‚çœæˆæœ¬**ï¼šå‡å°‘APIè°ƒç”¨æ¬¡æ•°
- ğŸ”„ **å¿«é€Ÿè¿­ä»£**ï¼šå¯ä»¥å¤šæ¬¡ç”ŸæˆæŠ¥å‘Šè¿›è¡Œè°ƒè¯•
- ğŸ“Š **æ•°æ®ä¸€è‡´æ€§**ï¼šä½¿ç”¨ç›¸åŒçš„æ•°æ®æºç¡®ä¿ç»“æœä¸€è‡´

### æ•°æ®ç›®å½•æ£€æŸ¥

ç³»ç»Ÿä¼šè‡ªåŠ¨æ£€æŸ¥æ•°æ®ç›®å½•çš„å®Œæ•´æ€§ï¼Œç¡®ä¿åŒ…å«å¿…éœ€çš„æ ¸å¿ƒæ–‡ä»¶ï¼š

```bash
# ç³»ç»Ÿæ£€æŸ¥å¿…éœ€æ–‡ä»¶ï¼ˆä»¥å®è§‚æŠ¥å‘Šä¸ºä¾‹ï¼‰ï¼š
âœ… æ£€æŸ¥æ–‡ä»¶: test_macro_datas/macro_outline.json
âœ… æ£€æŸ¥æ–‡ä»¶: test_macro_datas/flattened_macro_data.json  
âœ… æ£€æŸ¥æ–‡ä»¶: test_macro_datas/outline_data_allocation.json

# å¦‚æœæ•°æ®ç›®å½•ä¸å­˜åœ¨æˆ–ç¼ºå°‘å¿…éœ€æ–‡ä»¶ï¼š
ï¿½ æ•°æ®ç›®å½•ä¸å­˜æ–‡åœ¨æˆ–ä¸å®Œæ•´: test_macro_datas
ğŸ”„ å¼€å§‹è‡ªåŠ¨æ”¶é›†å®è§‚æ•°æ®...

# å¦‚æœæ•°æ®ç›®å½•å®Œæ•´ï¼Œç³»ç»Ÿä¼šç›´æ¥ä½¿ç”¨ï¼š
âœ… æ•°æ®ç›®å½•æ£€æŸ¥é€šè¿‡
ğŸ“ åŠ è½½å®è§‚æ•°æ®æ–‡ä»¶...
âœ… å®è§‚æ•°æ®åŠ è½½å®Œæˆ
```

**æ³¨æ„äº‹é¡¹ï¼š**

- ç³»ç»Ÿåªæ£€æŸ¥æ ¸å¿ƒæ•°æ®æ–‡ä»¶ï¼Œå¯è§†åŒ–æ–‡ä»¶ä¼šåœ¨æŠ¥å‘Šç”Ÿæˆè¿‡ç¨‹ä¸­è‡ªåŠ¨åˆ›å»º
- å¦‚æœ `images/` ç›®å½•ä¸å­˜åœ¨ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨åˆ›å»ºå¹¶ç”Ÿæˆå›¾è¡¨
- æ•°æ®ç›®å½•æ£€æŸ¥å¤±è´¥æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å¯åŠ¨æ•°æ®æ”¶é›†æµç¨‹

```bash
# åŸºç¡€ç”¨æ³• - ä»…ç”Ÿæˆ Markdown
uv run generate_report.py industry --industry_name "ä¸­å›½æ™ºèƒ½æœåŠ¡æœºå™¨äººäº§ä¸š"

# ç‰¹å®šè¡Œä¸š
uv run generate_report.py industry --industry_name "æ™ºèƒ½é£æ§&å¤§æ•°æ®å¾ä¿¡æœåŠ¡"

# ä½¿ç”¨ä¾¿æ·è„šæœ¬ï¼ˆæ”¯æŒ DOCX è½¬æ¢ï¼‰ - DOCX æ–‡ä»¶è¾“å‡ºåˆ° reports ç›®å½•
python run_industry_research_report.py --industry_name "ä¸­å›½æ™ºèƒ½æœåŠ¡æœºå™¨äººäº§ä¸š" --to_docx
```

#### ğŸŒ å®è§‚ç ”ç©¶æŠ¥å‘Š

```bash
# åŸºç¡€ç”¨æ³• - ä»…ç”Ÿæˆ Markdown
uv run generate_report.py macro --macro_name "äººå·¥æ™ºèƒ½+æ”¿ç­–æ•ˆæœè¯„ä¼°"

# æŒ‡å®šæ—¶é—´èŒƒå›´
uv run generate_report.py macro --macro_name "ç”Ÿæˆå¼AIåŸºå»ºä¸ç®—åŠ›æŠ•èµ„è¶‹åŠ¿" --time "2023-2026"

# ä½¿ç”¨ä¾¿æ·è„šæœ¬ï¼ˆæ”¯æŒ DOCX è½¬æ¢ï¼‰ - DOCX æ–‡ä»¶è¾“å‡ºåˆ° reports ç›®å½•
python run_macro_research_report.py --macro_name "å›½å®¶çº§äººå·¥æ™ºèƒ½+æ”¿ç­–æ•ˆæœè¯„ä¼°" --time "2023-2025" --to_docx
```

## ğŸ“‹ å‘½ä»¤è¡Œå‚æ•°

### å…¨å±€é€‰é¡¹

```bash
uv run generate_report.py --help
```

### å…¬å¸æŠ¥å‘Šé€‰é¡¹

```bash
uv run generate_report.py company --help

é€‰é¡¹:
  --company_name TEXT     å…¬å¸åç§° [å¿…éœ€]
  --company_code TEXT     å…¬å¸ä»£ç  [å¯é€‰]
  --data_dir TEXT         è‡ªå®šä¹‰æ•°æ®ç›®å½•è·¯å¾„ [å¯é€‰]
                         å¦‚ä¸æŒ‡å®šï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æŸ¥æ‰¾é€šç”¨ç›®å½• test_company_datas
                         æˆ–æ ¹æ®å…¬å¸åç§°ç”Ÿæˆç‰¹å®šç›®å½•
  --output TEXT           è¾“å‡ºæ–‡ä»¶è·¯å¾„ [å¯é€‰]
                         é»˜è®¤è¾“å‡ºåˆ°æ•°æ®ç›®å½•ä¸‹çš„ {å…¬å¸åç§°}_research_report.md
```

**ä¾¿æ·è„šæœ¬é¢å¤–é€‰é¡¹:**

```bash
python run_company_research_report.py --help

é¢å¤–é€‰é¡¹:
  --to_docx              è‡ªåŠ¨è½¬æ¢ä¸º DOCX æ ¼å¼
  --docx_output TEXT     è‡ªå®šä¹‰ DOCX è¾“å‡ºæ–‡ä»¶è·¯å¾„
                         é»˜è®¤è¾“å‡ºåˆ° reports/Company_Research_Report.docx
```

### è¡Œä¸šæŠ¥å‘Šé€‰é¡¹

```bash
uv run generate_report.py industry --help

é€‰é¡¹:
  --industry_name TEXT    è¡Œä¸šåç§° [å¿…éœ€]
  --data_dir TEXT         è‡ªå®šä¹‰æ•°æ®ç›®å½•è·¯å¾„ [å¯é€‰]
                         å¦‚ä¸æŒ‡å®šï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æŸ¥æ‰¾é€šç”¨ç›®å½• test_industry_datas
                         æˆ–æ ¹æ®è¡Œä¸šåç§°ç”Ÿæˆç‰¹å®šç›®å½•
  --output TEXT           è¾“å‡ºæ–‡ä»¶è·¯å¾„ [å¯é€‰]
                         é»˜è®¤è¾“å‡ºåˆ°æ•°æ®ç›®å½•ä¸‹çš„ {è¡Œä¸šåç§°}_research_report.md
```

**ä¾¿æ·è„šæœ¬é¢å¤–é€‰é¡¹:**

```bash
python run_industry_research_report.py --help

é¢å¤–é€‰é¡¹:
  --to_docx              è‡ªåŠ¨è½¬æ¢ä¸º DOCX æ ¼å¼
  --docx_output TEXT     è‡ªå®šä¹‰ DOCX è¾“å‡ºæ–‡ä»¶è·¯å¾„
                         é»˜è®¤è¾“å‡ºåˆ° reports/Industry_Research_Report.docx
```

### å®è§‚æŠ¥å‘Šé€‰é¡¹

```bash
uv run generate_report.py macro --help

é€‰é¡¹:
  --macro_name TEXT       å®è§‚ä¸»é¢˜åç§° [å¿…éœ€]
  --time TEXT             æ—¶é—´èŒƒå›´ [é»˜è®¤: 2023-2025]
  --data_dir TEXT         è‡ªå®šä¹‰æ•°æ®ç›®å½•è·¯å¾„ [å¯é€‰]
                         å¦‚ä¸æŒ‡å®šï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æŸ¥æ‰¾é€šç”¨ç›®å½• test_macro_datas
                         æˆ–æ ¹æ®ä¸»é¢˜åç§°ç”Ÿæˆç‰¹å®šç›®å½•
  --output TEXT           è¾“å‡ºæ–‡ä»¶è·¯å¾„ [å¯é€‰]
                         é»˜è®¤è¾“å‡ºåˆ°æ•°æ®ç›®å½•ä¸‹çš„ {ä¸»é¢˜åç§°}_{æ—¶é—´èŒƒå›´}_research_report.md
```

**ä¾¿æ·è„šæœ¬é¢å¤–é€‰é¡¹:**

```bash
python run_macro_research_report.py --help

é¢å¤–é€‰é¡¹:
  --to_docx              è‡ªåŠ¨è½¬æ¢ä¸º DOCX æ ¼å¼
  --docx_output TEXT     è‡ªå®šä¹‰ DOCX è¾“å‡ºæ–‡ä»¶è·¯å¾„
                         é»˜è®¤è¾“å‡ºåˆ° reports/Macro_Research_Report.docx
```

## ğŸ”§ æ ¸å¿ƒç»„ä»¶è¯¦è§£

### 1. é…ç½®ç®¡ç† (`config.py`)

ç»Ÿä¸€ç®¡ç†æ‰€æœ‰APIå¯†é’¥ã€URLå’Œé…ç½®é¡¹ï¼š

```python
from config import get_config, get_data_collection_config

# è·å–å…¨å±€é…ç½®
config = get_config()

# è·å–æ•°æ®æ”¶é›†é…ç½®
collection_config = get_data_collection_config("company")
```

**åŠŸèƒ½ç‰¹æ€§:**

- ğŸ” å¤šAPIæœåŠ¡å•†æ”¯æŒï¼ˆç«å±±å¼•æ“ã€ç¡…åŸºæµåŠ¨ã€æ™ºè°±AIã€æœ¬åœ°APIï¼‰
- âš™ï¸ çµæ´»çš„å¹¶å‘å’Œæœç´¢é…ç½®
- âœ… é…ç½®å®Œæ•´æ€§éªŒè¯
- ğŸ“Š é…ç½®çŠ¶æ€å¯è§†åŒ–

### 2. ç»Ÿä¸€æŠ¥å‘Šç”Ÿæˆå™¨ (`unified_report_generator.py`)

æ ¸å¿ƒæŠ¥å‘Šç”Ÿæˆå¼•æ“ï¼š

```python
from unified_report_generator import UnifiedReportGenerator

# åˆ›å»ºç”Ÿæˆå™¨
generator = UnifiedReportGenerator.from_env(report_type="company")

# ç”ŸæˆæŠ¥å‘Š
report = generator.generate_complete_report(
    subject_name="4Paradigm",
    data=data,
    output_file="report.md"
)
```

**æ ¸å¿ƒåŠŸèƒ½:**

- ğŸ“ æ™ºèƒ½å†…å®¹ç”Ÿæˆ
- ğŸ“Š è‡ªåŠ¨å›¾è¡¨å¢å¼º
- ğŸ¯ å¤šæŠ¥å‘Šç±»å‹æ”¯æŒ
- ğŸ“ˆ ç”Ÿæˆç»Ÿè®¡ä¿¡æ¯

## ğŸ”„ å·¥ä½œæµç¨‹

### 1. è‡ªåŠ¨åŒ–å·¥ä½œæµ

```bash
uv run generate_report.py company --company_name "4Paradigm"
```

æµç¨‹ï¼š

1. ğŸ” **æ£€æŸ¥æ•°æ®ç›®å½•** - éªŒè¯æ˜¯å¦å­˜åœ¨æ‰€éœ€æ•°æ®æ–‡ä»¶
2. ğŸ“¥ **è‡ªåŠ¨æ•°æ®æ”¶é›†** - å¦‚æœæ•°æ®ä¸å­˜åœ¨ï¼Œè‡ªåŠ¨å¯åŠ¨æ•°æ®æ”¶é›†
3. ğŸ“Š **æ•°æ®åŠ è½½å¤„ç†** - åŠ è½½å’Œé¢„å¤„ç†æ”¶é›†çš„æ•°æ®
4. ğŸ“ **æŠ¥å‘Šå†…å®¹ç”Ÿæˆ** - åŸºäºæ¨¡æ¿å’Œæ•°æ®ç”ŸæˆæŠ¥å‘Šå†…å®¹
5. ğŸ¨ **å›¾è¡¨å¢å¼ºå¤„ç†** - è‡ªåŠ¨ç”Ÿæˆå’Œæ’å…¥ç›¸å…³å›¾è¡¨
6. ğŸ’¾ **æŠ¥å‘Šè¾“å‡ºä¿å­˜** - ç”Ÿæˆæœ€ç»ˆçš„MarkdownæŠ¥å‘Šæ–‡ä»¶

### 2. æ‰‹åŠ¨åˆ†æ­¥æµç¨‹

```bash
# æ­¥éª¤1: æ•°æ®æ”¶é›†
uv run company_collect_data.py 

# æ­¥éª¤2: æŠ¥å‘Šç”Ÿæˆ
uv run gen_report_company.py --company_name "4Paradigm" --data_dir "test_company_datas"
```

## ğŸ“Š è¾“å‡ºæ–‡ä»¶ç»“æ„

ç”Ÿæˆçš„æŠ¥å‘ŠåŒ…å«ä»¥ä¸‹å®Œæ•´æ–‡ä»¶ç»“æ„ï¼š

```bash
# å®Œæ•´çš„æ•°æ®ç›®å½•ç»“æ„ï¼ˆä»¥å®è§‚æŠ¥å‘Šä¸ºä¾‹ï¼‰
test_macro_datas/
â”œâ”€â”€ ğŸ“‹ æ ¸å¿ƒæ•°æ®æ–‡ä»¶
â”‚   â”œâ”€â”€ macro_outline.json               # å®è§‚æŠ¥å‘Šå¤§çº²ç»“æ„
â”‚   â”œâ”€â”€ flattened_macro_data.json        # æ‰å¹³åŒ–çš„åŸå§‹æ•°æ®
â”‚   â””â”€â”€ outline_data_allocation.json     # æ•°æ®åˆ°å¤§çº²çš„åˆ†é…æ˜ å°„
â”‚
â”œâ”€â”€ ğŸ¨ å¯è§†åŒ–ç›¸å…³æ–‡ä»¶
â”‚   â”œâ”€â”€ visualization_assets.json        # å¯è§†åŒ–èµ„äº§é…ç½®
â”‚   â””â”€â”€ visualization_data_results.json  # å¯è§†åŒ–æ•°æ®å¤„ç†ç»“æœ
â”‚
â”œâ”€â”€ ğŸ–¼ï¸ å›¾è¡¨æ–‡ä»¶ç›®å½•
â”‚   â””â”€â”€ images/                          # è‡ªåŠ¨ç”Ÿæˆçš„å›¾è¡¨
â”‚       â”œâ”€â”€ chart_001.png               # æ”¿ç­–è¶‹åŠ¿å›¾
â”‚       â”œâ”€â”€ chart_002.png               # æŠ•èµ„è§„æ¨¡å›¾
â”‚       â”œâ”€â”€ chart_003.png               # æ•ˆæœè¯„ä¼°å›¾
â”‚       â””â”€â”€ ... (é€šå¸¸åŒ…å«æ•°åä¸ªå›¾è¡¨)
â”‚
â””â”€â”€ ğŸ“„ æœ€ç»ˆæŠ¥å‘Šæ–‡ä»¶
    â”œâ”€â”€ å›½å®¶çº§äººå·¥æ™ºèƒ½+æ”¿ç­–æ•ˆæœè¯„ä¼°_2023-2025_research_report.md  # MarkdownæŠ¥å‘Š
    â””â”€â”€ å›½å®¶çº§äººå·¥æ™ºèƒ½æ”¿ç­–æ•ˆæœè¯„ä¼°æŠ¥å‘Š.docx                      # DOCXæŠ¥å‘Š (å¯é€‰)
```

**æ–‡ä»¶ç”Ÿæˆæµç¨‹ï¼š**

1. **æ•°æ®æ”¶é›†é˜¶æ®µ** â†’ ç”Ÿæˆæ ¸å¿ƒæ•°æ®æ–‡ä»¶ (outline, flattened_data, allocation)
2. **å¯è§†åŒ–å¤„ç†** â†’ ç”Ÿæˆå¯è§†åŒ–é…ç½®å’Œç»“æœæ–‡ä»¶
3. **å›¾è¡¨ç”Ÿæˆ** â†’ åœ¨ images/ ç›®å½•ä¸‹ç”Ÿæˆæ‰€æœ‰PNGå›¾è¡¨
4. **æŠ¥å‘Šç”Ÿæˆ** â†’ ç”Ÿæˆæœ€ç»ˆçš„MarkdownæŠ¥å‘Šæ–‡ä»¶
5. **æ ¼å¼è½¬æ¢** â†’ å¯é€‰ç”ŸæˆDOCXæ ¼å¼æŠ¥å‘Š

## ğŸ§ª æµ‹è¯•å’Œç¤ºä¾‹

### è¿è¡Œé›†æˆæµ‹è¯•

```bash
uv run test_integration.py
```

### å¿«é€Ÿç¤ºä¾‹è¿è¡Œ

```bash
uv run quick_run_examples.py
```

## âš™ï¸ é«˜çº§é…ç½®

### 1. æ€§èƒ½è°ƒä¼˜

åœ¨ `.env` æ–‡ä»¶ä¸­è°ƒæ•´å¹¶å‘é…ç½®ï¼š

```env
# æ•°æ®æ”¶é›†å¹¶å‘æ•°
MAX_CONCURRENT_COMPANY=2000
MAX_CONCURRENT_INDUSTRY=2000
MAX_CONCURRENT_MACRO=2000

# æœç´¢é—´éš”ï¼ˆç§’ï¼‰
SEARCH_INTERVAL_COMPANY=1.0
SEARCH_INTERVAL_INDUSTRY=1.0
SEARCH_INTERVAL_MACRO=1.0

# æ¨¡å‹é…ç½®
DEFAULT_TEMPERATURE=0.5
DEFAULT_MAX_TOKENS=1024
MAX_CONTEXT_TOKENS=131072
```

### 2. æ¨¡å‹åˆ‡æ¢

æ”¯æŒå¤šç§æ¨¡å‹é…ç½®ï¼š

```env
# ç¡…åŸºæµåŠ¨æ¨¡å‹é€‰æ‹©
GUIJI_TEXT_MODEL=moonshotai/Kimi-K2-Instruct          # é»˜è®¤æ¨¡å‹
GUIJI_TEXT_MODEL_DEEPSEEK=deepseek-ai/DeepSeek-V3     # DeepSeekæ¨¡å‹
GUIJI_TEXT_MODEL_DEEPSEEK_PRO=Pro/deepseek-ai/DeepSeek-V3  # Proç‰ˆæœ¬
GUIJI_FREE_TEXT_MODEL=THUDM/GLM-Z1-9B-0414           # å…è´¹æ¨¡å‹
```

## ğŸ“ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š

- ğŸ“§ Email: <lixiuqixiaoke@qq.com>
